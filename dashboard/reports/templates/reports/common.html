{% macro detail_report(report, id) %}

<tr>
    <td>{{ id }}</td>
    <td><a href="{{ url_for('custom_report.show_report', report_id=report.id) }}">{{ report.name }}</a></td>
    <td>{{ report.description }}</td>
    <td>{{ report.url | format_url}}</td>
    <td user-id="{{ report.id }}">
    <div class="span1">
        <a class="report-delete-link" href="#" data-delete-url="{{ url_for('report_rest_api.delete_report', report_id=report.id) }}">
            <i class="icon-trash"></i>
        </a>
        <a class="report-edit-link" href="{{ url_for('custom_report.edit_report', report_id=report.id) }}">
            <i class="icon-edit"></i>
        </a>
    </div>
    </td>
</tr>
{% endmacro %}

{% macro table_report(reports) %}
    {% set count = 0 %}
    {% for report in reports %}
    <h4 class="text-center"> {{ report[0] | filter_table_header }}</h4>
    <table class="table table-striped table-hover" id="example_{{ count }}">
    {% set header = report[0] | split_string %}
        <thead>
            <tr>
            {% for column in header %}
                <th> {{ column }} </th>
            {% endfor %}
                <th>Total</th>
            </tr>
        </thead>
        {% for row in report[1:] %}
            {% set splited_row = row |split_string %}
            <tr>
            {% for column in splited_row %}
                    <td> {{ column }} </td>
            {% endfor %}

            {% set row_total = splited_row | get_list_of_ints | sum() %}
                <td> {{ row_total }} </td>
            </tr>
        {% endfor %}
        <tfoot>
        <tr>
            <td>Total</td>
            {% set total_r = report[1:] | get_total_bugzilla_report %}
            {% for total in total_r %}
                <td>{{ total }}</td>
            {% endfor %}       
        </tr>
        </tfoot>
    </table>
    </br>
    {% set count = count + 1 %}
    {% endfor %}
{% endmacro %}
